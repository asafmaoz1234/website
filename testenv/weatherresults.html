<!DOCTYPE html>
<html>
<head>
  <title>Sample Form</title>
</head>
<body>
<form id="myForm">
  <label for="name">Name:</label>
  <input type="text" id="name" name="name"><br><br>
  <label for="email">Email:</label>
  <input type="email" id="email" name="email"><br><br>
  <label for="message">Message:</label>
  <textarea id="message" name="message"></textarea><br><br>
  <button type="submit" onclick="sendForm()">Submit</button>
</form>

<table id="responseTable" style="display: none;">
  <thead>
  <tr>
    <th>Name</th>
    <th>Email</th>
    <th>Message</th>
  </tr>
  </thead>
  <tbody>
  </tbody>
</table>

<script>
  function sendForm() {
    event.preventDefault();

    const form = document.getElementById("myForm");
    const formData = new FormData(form);
    const jsonData = JSON.stringify(Object.fromEntries(formData));

    fetch('https://i8dl0hsx6a.execute-api.eu-west-1.amazonaws.com/test/formresponse', {
      method: 'POST',
      body: jsonData,
      headers: {
        'Content-Type': 'application/json'
      }
    })
            .then(response => response.json())
            .then(data => {
              const responseTable = document.getElementById("responseTable");
              const tbody = responseTable.querySelector("tbody");
              const newRow = tbody.insertRow();

              const nameCell = newRow.insertCell();
              const emailCell = newRow.insertCell();
              const messageCell = newRow.insertCell();

              nameCell.textContent = data.name;
              emailCell.textContent = data.email;
              messageCell.textContent = data.message;

              responseTable.style.display = "table";
            })
            .catch(error => console.error(error));
  }
</script>
</body>
</html>
